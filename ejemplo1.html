<html lang="en">
<head>
  <title>The HTML5 Herald</title>
  <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />

  <style type="text/css">

  body, html {
    width:100%;
    padding:0;
    margin:0;
  }

  #map {
    height:100%;
    width:100%;
    background: #fff
  }

  </style>
</head>

<body>
  <div id="map">Map</div>
  <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>
  <script>
        var map = L.map('map', {
          scrollWheelZoom: false,
          center: [40.7127837, -74.0059413],
          zoom: 5
        });

        var layer = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
        });
        map.addLayer(layer);


      var dataLayer = {
            user_name: 'dcarrion',
            type: 'torque',
            options: {
                query: "SELECT * FROM elecciones_partidos",
                cartocss: 'Map {-torque-frame-count:1;-torque-animation-duration:30;-torque-time-attribute:"postedtime";-torque-aggregation-function:"count(cartodb_id)";-torque-resolution:2;-torque-data-aggregation:cumulative;}#elecciones_partidos{image-filters: colorize-alpha(blue, cyan, #FFFFFF, yellow , #FFCC00, red);marker-file: url(http://s3.amazonaws.com/com.cartodb.assets.static/alphamarker.png);marker-fill-opacity: 0.1;marker-width: 20;}'
            }
        };
        cartodb.createLayer(map, dataLayer).addTo(map);

        var dataLayer = {
            user_name: 'dcarrion',
            type: 'torque',
            options: {
                query: "SELECT * FROM elecciones_partidos",
                cartocss: 'Map {-torque-frame-count:512;-torque-animation-duration:30;-torque-time-attribute:"postedtime";-torque-aggregation-function:"CDB_Math_Mode(category_name)";-torque-resolution:2;-torque-data-aggregation:linear}#elecciones_partidos{comp-op:lighter;marker-opacity:.2;marker-line-color:#FFF;marker-line-width:0;marker-line-opacity:1;marker-type:ellipse;marker-width:2;marker-fill:#F90}#elecciones_partidos::point2[value=1],#elecciones_partidos[value=1]{marker-fill:#42a4dc}#elecciones_partidos::point2[value=2],#elecciones_partidos[value=2]{marker-fill:#ce4039}#elecciones_partidos::point2[value=3],#elecciones_partidos[value=3]{marker-fill:#4b1e5b}#elecciones_partidos::point2[value=4],#elecciones_partidos[value=4]{marker-fill:#539147}#elecciones_partidos::point2[value=5],#elecciones_partidos[value=5]{marker-fill:#FF5C00}#elecciones_partidos[value=6]{marker-fill:#EC008C}#elecciones_partidos::point2,#elecciones_partidos::point3{marker-fill:#229A00;marker-line-color:#fff;marker-line-width:1}#elecciones_partidos::point2{marker-width:1;marker-fill-opacity:1;marker-line-opacity:0}#elecciones_partidos::point2[value=6]{marker-fill-opacity:0}#elecciones_partidos::point3{marker-width:8;marker-fill-opacity:0;marker-line-opacity:.2}#elecciones_partidos::3[value=1]{marker-line-color:#5ca2dc}#elecciones_partidos::point3[value=2]{marker-line-color:#cd1f25}#elecciones_partidos::point3[value=3]{marker-line-color:#aa0028}#elecciones_partidos::point3[value=4]{marker-line-color:#593561}#elecciones_partidos::point3[value=5]{marker-line-color:#FF5C00}#elecciones_partidos::point3[value=6]{marker-line-color:#c3007f}#elecciones_partidos[frame-offset=1]{marker-width:3;marker-opacity:.45}#elecciones_partidos[frame-offset=2]{marker-width:4;marker-opacity:.225}#elecciones_partidos[frame-offset=3]{marker-width:5;marker-opacity:.15}#elecciones_partidos[frame-offset=4]{marker-width:6;marker-opacity:.1125}#elecciones_partidos[frame-offset=5]{marker-width:7;marker-opacity:.09}#elecciones_partidos[frame-offset=6]{marker-width:8;marker-opacity:.075}#elecciones_partidos[frame-offset=7]{marker-width:9;marker-opacity:.0642857142857143}#elecciones_partidos[frame-offset=8]{marker-width:10;marker-opacity:.05625}#elecciones_partidos[frame-offset=9]{marker-width:11;marker-opacity:.05}'
            }
        };
        cartodb.createLayer(map, dataLayer).addTo(map);

       




  </script>
</body>
</html>